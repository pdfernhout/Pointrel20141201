<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.1/dojo/dojo.js"></script>
</head>
<body>
Test of PUT-ing a resource.

<script>
console.log("starting up...");
require(["dojo/store/JsonRest"], function(JsonRest) {
    "use strict";
    
    var store = new JsonRest({
      target: "/api/pointrel20141201/resources"
    });
    
    var testObject1 = {foo: "bar", id: 3};

    store.put(testObject1, {incremental: true}).then(function(result) {
      console.log("Stored item", result.sha256AndLength);
      
      var sha256AndLengthExpected1 = "5d8fd807c06c3a8e99fa7bd59b57d5b13822152be3de068a8d9a4e5ad609a1c5_20";
      
      console.log("match expected 1?", sha256AndLengthExpected1 === result.sha256AndLength); 
      
      // Get an object by sha256AndLength
      store.get(sha256AndLengthExpected1).then(function(item) {
        console.log("Got item", item);
      });
    });
    
    var testObject2 = {id: "hello world", tags: ["test", "pointrel://pages/hello-world.txt"], contentType: "text/plain", content: "Hello, world!"};
    store.put(testObject2, {incremental: true}).then(function(result) {
      console.log("Stored item", result.sha256AndLength);
      
      var sha256AndLengthExpected2 = "bdc83b865f8720e3fccee44ec482031c8c9d185b213dc50f2d429bce241f080d_124";
      
      console.log("match expected 2?", sha256AndLengthExpected2 === result.sha256AndLength); 
      
      store.get(result.sha256AndLength).then(function(item) {
        console.log("Got item", item);
      });
    });
  });

</script>
</body>
</html>