<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.1/dojo/dojo.js"></script>
</head>
<body>
Test of PUT-ing a resource.

<script>
console.log("starting up...");
require(["./pointrel20141201Client.js"], function(pointrel20141201Client) {
    "use strict";
    
    console.log("pointrel20141201Client", pointrel20141201Client);
        
    var testObject1 = {foo: "bar", id: 3};

    pointrel20141201Client.store(testObject1, function(error, result) {
        if (error) { console.log("error", error); return;}
        
        console.log("Stored item", result.sha256AndLength);
      
        var sha256AndLengthExpected1 = "5d8fd807c06c3a8e99fa7bd59b57d5b13822152be3de068a8d9a4e5ad609a1c5_20";
      
        console.log("match expected 1?", sha256AndLengthExpected1 === result.sha256AndLength); 
      
        // Get an object by sha256AndLength
        pointrel20141201Client.fetch(sha256AndLengthExpected1, function(error, item) {
            if (error) { console.log("error", error); return;}
            console.log("Got item", item);
        });
    });
    
    var testObject2 = {id: "hello world", tags: ["test", "pointrel://pages/hello-world.txt"], contentType: "text/plain", content: "Hello, world!"};
    pointrel20141201Client.store(testObject2, function(error, result) {
        if (error) { console.log("error", error); return;}
        
        console.log("Stored item", result.sha256AndLength);
      
        var sha256AndLengthExpected2 = "bdc83b865f8720e3fccee44ec482031c8c9d185b213dc50f2d429bce241f080d_124";
      
        console.log("match expected 2?", sha256AndLengthExpected2 === result.sha256AndLength); 
      
        pointrel20141201Client.fetch(result.sha256AndLength, function(error, item) {
            if (error) { console.log("error", error); return;}
            console.log("Got item", item);
        });
    });
    
    pointrel20141201Client.queryByID("hello world", function(error, queryResult) {
        if (error) { console.log("error", error); return;}
        console.log("Got queryResult for id 'hello world'", queryResult);
    });
    
    pointrel20141201Client.queryByTag("test", function(error, queryResult) {
        if (error) { console.log("error", error); return;}
        console.log("Got queryResult for tag 'test'", queryResult);
    });
    
    pointrel20141201Client.queryByTag("test-nonexistent-tag", function(error, queryResult) {
        if (error) { console.log("error", error); return;}
        console.log("Got queryResult for tag 'test-nonexistent-tag'", queryResult);
    });
});

</script>
</body>
</html>